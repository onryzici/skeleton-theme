{% comment %}
  Icon Features Section
  4-column feature grid with icons
{% endcomment %}

<style>
  /* Section padding */
  #shopify-section-{{ section.id }} .icon-features-section {
    padding-top: {{ section.settings.padding_top_mobile }}px;
    padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
  }

  @media (min-width: 1024px) {
    #shopify-section-{{ section.id }} .icon-features-section {
      padding-top: {{ section.settings.padding_top_desktop }}px;
      padding-bottom: {{ section.settings.padding_bottom_desktop }}px;
    }
  }

  /* Gradient background */
  #shopify-section-{{ section.id }} .gradient-background {
    background: linear-gradient({{ section.settings.gradient_angle }}deg, {{ section.settings.gradient_start }} 0%, {{ section.settings.gradient_middle }} 50%, {{ section.settings.gradient_end }} 100%);
  }

  /* Feature card animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  #shopify-section-{{ section.id }} .feature-card {
    animation: fadeInUp 0.6s ease forwards;
    opacity: 0;
  }

  #shopify-section-{{ section.id }} .feature-card:nth-child(1) {
    animation-delay: 0.1s;
  }

  #shopify-section-{{ section.id }} .feature-card:nth-child(2) {
    animation-delay: 0.2s;
  }

  #shopify-section-{{ section.id }} .feature-card:nth-child(3) {
    animation-delay: 0.3s;
  }

  #shopify-section-{{ section.id }} .feature-card:nth-child(4) {
    animation-delay: 0.4s;
  }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    #shopify-section-{{ section.id }} .feature-card {
      animation: none !important;
      opacity: 1 !important;
    }
  }

  /* Divider lines */
  #shopify-section-{{ section.id }} .feature-card:not(:last-child)::after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 1px;
    height: 60%;
    background: linear-gradient(to bottom, transparent, rgba(209, 213, 219, 0.5), transparent);
  }

  @media (max-width: 1023px) {
    #shopify-section-{{ section.id }} .feature-card::after {
      display: none;
    }
  }
</style>

<div class="icon-features-section full-width gradient-background">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-0">

      {% for block in section.blocks %}
        <div class="feature-card relative text-center px-4 lg:px-6" {{ block.shopify_attributes }}>

          {% comment %} Icon {% endcomment %}
          {% if block.settings.icon != blank %}
            <div class="mb-6 flex items-center justify-center">
              <img
                src="{{ block.settings.icon | asset_url }}"
                alt="{{ block.settings.title | escape }}"
                class="w-12 h-12 lg:w-14 lg:h-14 object-contain"
                style="image-rendering: -webkit-optimize-contrast; image-rendering: crisp-edges;"
                loading="lazy"
              >
            </div>
          {% endif %}

          {% comment %} Title {% endcomment %}
          {% if block.settings.title != blank %}
            <h3 class="text-sm lg:text-lg font-bold font-sans text-gray-900 mb-3">
              {{ block.settings.title }}
            </h3>
          {% endif %}

          {% comment %} Description {% endcomment %}
          {% if block.settings.description != blank %}
            <p class="text-xs lg:text-base text-gray-600 font-extralight font-sans leading-relaxed">
              {{ block.settings.description }}
            </p>
          {% endif %}

        </div>
      {% endfor %}

    </div>

  </div>
</div>

{% schema %}
{
  "name": "Icon Features",
  "settings": [
    {
      "type": "header",
      "content": "Background Gradient"
    },
    {
      "type": "range",
      "id": "gradient_angle",
      "min": 0,
      "max": 360,
      "step": 15,
      "unit": "deg",
      "label": "Gradient angle",
      "default": 135
    },
    {
      "type": "color",
      "id": "gradient_start",
      "label": "Gradient start color",
      "default": "#e0f2fe"
    },
    {
      "type": "color",
      "id": "gradient_middle",
      "label": "Gradient middle color",
      "default": "#f0f9ff"
    },
    {
      "type": "color",
      "id": "gradient_end",
      "label": "Gradient end color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Section Spacing"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding (mobile)",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding (mobile)",
      "default": 48
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Top padding (desktop)",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding (desktop)",
      "default": 80
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "text",
          "id": "icon",
          "label": "Icon filename",
          "info": "Enter filename from assets folder (e.g., fast.png)",
          "default": "fast.png"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Fast, Free Shipping"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Ship out within 1-2 business days"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Icon Features",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "icon": "fast.png",
            "title": "Fast, Free Shipping",
            "description": "Ship out within 1-2 business days"
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "return.png",
            "title": "Free 30-Day Return",
            "description": "No reason needed. Free return shipping & full refund."
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "support.png",
            "title": "Lifetime Customer Support",
            "description": "Quick support within 24 hours on working days"
          }
        },
        {
          "type": "feature",
          "settings": {
            "icon": "security.png",
            "title": "One-Year Warranty",
            "description": "Warranty Period subject to local laws"
          }
        }
      ]
    }
  ]
}
{% endschema %}
